<!doctype html><html><head>
<meta charset="utf-8"><title>Catalog — YOUR BRAND</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="assets/css/styles.css" />
</head><body>
<header class="sticky top-0 z-40 bg-white/90 backdrop-blur border-b">
  <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
    <a href="index.html" class="text-xl font-bold">YOUR BRAND</a>
    <nav class="hidden md:flex gap-6 text-sm">
      <a href="catalog.html">Catalog</a><a href="gold-rate.html">Gold Rates</a><a href="about.html">About</a><a href="contact.html">Contact</a>
    </nav>
  </div>
  <div id="rate-bar" class="text-center text-xs py-2"></div>
</header>

<main class="max-w-6xl mx-auto p-4">
  <div class="flex gap-3 mb-4">
    <input id="q" class="border p-2 flex-1 rounded-lg" placeholder="Search rings, bangles…" />
    <select id="metal" class="border p-2 rounded-lg"><option value="">All metals</option><option>Gold</option><option>Silver</option><option>Diamond</option></select>
    <select id="purity" class="border p-2 rounded-lg"><option value="">Purity</option><option>24K</option><option>22K</option><option>18K</option></select>
  </div>
  <div id="grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
</main>

<script>
async function loadCSV(url){
  const t = await (await fetch(url)).text();
  const [head,...rows] = t.trim().split('\n').map(r=>r.split(','));
  return rows.map(r=>Object.fromEntries(head.map((h,i)=>[h.trim(), r[i]?.trim()])));
}
(async ()=>{
  const items = await loadCSV('data/products.csv');
  const grid = document.getElementById('grid');
  const q = document.getElementById('q'), metal = document.getElementById('metal'), purity = document.getElementById('purity');
  function render(){
    const term = q.value.toLowerCase();
    grid.innerHTML='';
    items.filter(x =>
      (!metal.value || x.metal===metal.value) &&
      (!purity.value || x.purity===purity.value) &&
      (!term || Object.values(x).join(' ').toLowerCase().includes(term))
    ).forEach(x=>{
      const card = document.createElement('a');
      card.href = `product.html?sku=${encodeURIComponent(x.sku)}`;
      card.className = "block rounded-2xl shadow p-3 hover:shadow-lg transition";
      card.innerHTML = `
        <img src="${x.image}" alt="${x.name}" class="rounded-xl aspect-square object-cover w-full"/>
        <h3 class="mt-2 font-semibold">${x.name}</h3>
        <p class="text-sm text-slate-600">${x.metal} ${x.purity} • ${x.weight_g}g</p>`;
      grid.appendChild(card);
    });
  }
  [q,metal,purity].forEach(el=>el.addEventListener('input',render));
  render();
})();
</script>

<script>
fetch('data/rates.json').then(r=>r.json()).then(d=>{
  document.getElementById('rate-bar').innerText =
    `Gold 24K: ₹${d.gold24k}/g | 22K: ₹${d.gold22k}/g | Silver: ₹${d.silver}/g — Updated ${d.updated}`;
});
</script>
</body></html>
